## 阶段 4：测试、性能与安全检查清单

### 1. 自动化测试
- `backend/tests/test_proposals.py`：验证 Phase-1 提案创建流程（多仪器、多附件）
- `backend/tests/test_workflow_engine.py`：验证工作流引擎的可执行动作与状态迁移逻辑
- 后续补充：仪器排程反馈、Phase-2 入口、评审工作流的端到端测试

### 2. 性能优化关注点
- 为 `ProposalPhase`、`ProposalInstrument` 增加联合索引，支撑按仪器/状态过滤
- 建议在部署环境中启用 SQL 查询日志，对高频 API（提案列表、仪器队列）做压测
- 未来阶段：引入只读副本或缓存层处理评审席位快速刷新需求

### 3. 安全检查要点
- JWT：确认 `SECRET_KEY` 通过环境变量注入，避免默认值泄露
- RBAC：新增角色（Instrument Scheduler、Panel Chair）已在模型与前端中校验
- 输入校验：前端对大文件仅上传元数据；后端待引入实际文件存储与大小限制
- 审计：`ProposalStateHistory` 保留工作流追踪，后续需结合操作人来源 IP、上下文日志

### 4. 手工测试建议
- 使用管理员账号创建提案季、配置工作流后重复跑通提案 -> 排程 -> 确认 -> 评审全过程
- 验证非授权用户访问受限 API 返回 403/401
- 模拟多个仪器同时排程，确认仪器队列刷新性能与页面响应

